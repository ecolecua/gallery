{"ast":null,"code":"import _slicedToArray from\"/Users/josegomez.dev/Desktop/photo-contest/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';// import ProgressBar from './ProgressBar';\nimport{storage}from'../firebase/config';import{ref,uploadBytes}from'firebase/storage';import{v4}from'uuid';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UploadForm=function UploadForm(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var types=['image/png','image/jpeg','image/jpg'];var changeHandler=function changeHandler(e){var selected=e.target.files[0];if(selected&&types.includes(selected.type)){setFile(selected);setError(null);var imageRef=ref(storage,\"images/\".concat(selected.name+v4()));uploadBytes(imageRef,selected).then(function(){alert('Image Uploaded!');});}else{setFile(null);setError('Invalid format!~');}};return/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:changeHandler}),/*#__PURE__*/_jsx(\"span\",{children:\"+\"})]}),/*#__PURE__*/_jsxs(_Fragment,{children:[error&&/*#__PURE__*/_jsx(\"div\",{children:error}),file&&/*#__PURE__*/_jsx(\"div\",{children:file.name})]})]});};export default UploadForm;","map":{"version":3,"names":["React","useState","storage","ref","uploadBytes","v4","UploadForm","file","setFile","error","setError","types","changeHandler","e","selected","target","files","includes","type","imageRef","name","then","alert"],"sources":["/Users/josegomez.dev/Desktop/photo-contest/src/components/UploadForm.js"],"sourcesContent":["import React, { useState } from 'react';\n// import ProgressBar from './ProgressBar';\nimport { storage } from '../firebase/config';\nimport { ref, uploadBytes } from 'firebase/storage';\nimport { v4 } from 'uuid';\n\nconst UploadForm = () => {\n  const [file, setFile] = useState(null);\n  const [error, setError] = useState(null);\n\n  const types = ['image/png', 'image/jpeg', 'image/jpg'];\n\n  const changeHandler = (e) => {\n    let selected = e.target.files[0];\n\n    if (selected && types.includes(selected.type)) {\n      setFile(selected);\n      setError(null);\n\n      const imageRef = ref(storage, `images/${selected.name + v4()}`);\n      uploadBytes(imageRef, selected).then(() => {\n        alert('Image Uploaded!');\n      });\n    } else {\n      setFile(null);\n      setError('Invalid format!~');\n    }\n  };\n\n  return (\n    <form>\n      <label htmlFor=\"\">\n        <input type=\"file\" onChange={changeHandler} />\n        <span>+</span>\n      </label>\n      <>\n        {error && <div>{error}</div>}\n        {file && <div>{file.name}</div>}\n        {/* {file && <ProgressBar file={file} setFile={setFile} />} */}\n      </>\n    </form>\n  );\n};\n\nexport default UploadForm;\n"],"mappings":"gIAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA;AACA,OAASC,OAAT,KAAwB,oBAAxB,CACA,OAASC,GAAT,CAAcC,WAAd,KAAiC,kBAAjC,CACA,OAASC,EAAT,KAAmB,MAAnB,C,6IAEA,GAAMC,WAAU,CAAG,QAAbA,WAAa,EAAM,CACvB,cAAwBL,QAAQ,CAAC,IAAD,CAAhC,wCAAOM,IAAP,eAAaC,OAAb,eACA,eAA0BP,QAAQ,CAAC,IAAD,CAAlC,yCAAOQ,KAAP,eAAcC,QAAd,eAEA,GAAMC,MAAK,CAAG,CAAC,WAAD,CAAc,YAAd,CAA4B,WAA5B,CAAd,CAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,CAACC,CAAD,CAAO,CAC3B,GAAIC,SAAQ,CAAGD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAf,CAEA,GAAIF,QAAQ,EAAIH,KAAK,CAACM,QAAN,CAAeH,QAAQ,CAACI,IAAxB,CAAhB,CAA+C,CAC7CV,OAAO,CAACM,QAAD,CAAP,CACAJ,QAAQ,CAAC,IAAD,CAAR,CAEA,GAAMS,SAAQ,CAAGhB,GAAG,CAACD,OAAD,kBAAoBY,QAAQ,CAACM,IAAT,CAAgBf,EAAE,EAAtC,EAApB,CACAD,WAAW,CAACe,QAAD,CAAWL,QAAX,CAAX,CAAgCO,IAAhC,CAAqC,UAAM,CACzCC,KAAK,CAAC,iBAAD,CAAL,CACD,CAFD,EAGD,CARD,IAQO,CACLd,OAAO,CAAC,IAAD,CAAP,CACAE,QAAQ,CAAC,kBAAD,CAAR,CACD,CACF,CAfD,CAiBA,mBACE,qCACE,eAAO,OAAO,CAAC,EAAf,wBACE,cAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAEE,aAA7B,EADF,cAEE,2BAFF,GADF,cAKE,2BACGH,KAAK,eAAI,qBAAMA,KAAN,EADZ,CAEGF,IAAI,eAAI,qBAAMA,IAAI,CAACa,IAAX,EAFX,GALF,GADF,CAaD,CApCD,CAsCA,cAAed,WAAf"},"metadata":{},"sourceType":"module"}